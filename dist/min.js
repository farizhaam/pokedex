let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=48";function n(t){"object"==typeof t&&"name"in t?e.push(t):console.log("pokemon is not correct")}function i(){let e=document.querySelector("#loading");window.addEventListener("load",function(){e.style.visibility="visible"})}function o(){let e=document.querySelector("#loading");setTimeout(function(){e.style.visibility="hidden"},100)}function l(e){i();let t=e.detailsUrl;return fetch(t).then(function(e){return o(),e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.type=t.types,e.ability=t.abilities}).catch(function(e){o(),console.error(e)})}function a(e){l(e).then(function(){s(e)})}let c,r=document.querySelector("#modal-container");function s(e){let t=document.querySelector(".modal-title"),n=document.querySelector(".modal-body");r.innerHTML="",t.innerHTML="",n.innerHTML="";let i=document.createElement("h2");i.innerText=e.name;let o=document.createElement("p"),l=e.height/10,a=e.weight/10,c=[],s=[];Object.keys(e.type).forEach(t=>{c.push(e.type[t].type.name)}),Object.keys(e.ability).forEach(t=>{s.push(e.ability[t].ability.name)}),o.innerText="Height: "+l+"m \r\nWeight: "+a+"kg \r\nTypes: "+c+"\r\nAbilities: "+s;let d=document.createElement("img");d.setAttribute("src",e.imageUrl),d.setAttribute("alt","Front view of"+e.name),t.appendChild(i),n.appendChild(d),n.appendChild(o),r.classList.add("is-visible")}function d(){r.classList.remove("is-visible"),c&&(c(),c=null)}return window.addEventListener("keydown",e=>{"Escape"===e.key&&r.classList.contains("is-visible")&&d()}),r.addEventListener("click",e=>{e.target===r&&d()}),{getAll:function(){return e},add:n,addListItem:function(e){let t=document.querySelector(".list-group"),n=document.createElement("li");n.classList.add("group-list-item"),n.classList.add("col","col-md-6","col-lg-4");let i=document.createElement("button");i.innerText=e.name,i.classList.add("pokemon-panel","btn","btn-primary"),i.setAttribute("data-target","#exampleModal"),i.setAttribute("data-toggle","modal"),n.appendChild(i),t.appendChild(n),i.addEventListener("click",function(t){a(e)})},showDetails:a,loadList:function(){return i(),fetch(t).then(function(e){return e.json()}).then(function(e){o(),e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(function(e){o(),console.error(e)})},loadDetails:l,showLoadingImage:i,hideLoadingImage:o,showModal:s,hideModal:d}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});